# ARP 的工作

> 原文：<https://www.tutorialandexample.com/working-of-arp>

大多数计算机程序和应用程序使用逻辑地址(IP 地址)发送和接收消息，但实际通信是通过物理地址(MAC 地址)进行的，物理地址位于 OSI 模型的第 2 层。

我们的目标是找到目的 MAC 地址，以便与其它设备通信。因为 ARP 把 IP 地址转换成 Mac 地址或者物理地址，在这种情况下是有帮助的。

加入局域网的新计算机由用于识别和通信的特殊 IP 地址指定。当来自特定局域网上的主机的数据包到达网关时，ARP 程序将被要求定位与 IP 地址匹配的 MAC 地址。

当主机请求 MAC 地址向 LAN 中的另一台主机发送数据包时，它首先确定 ARP 缓存中是否存在 IP 到 Mac 地址的转换。如果存在，则不需要新的 ARP 请求，如果转换不存在，则在 ARP 操作之前发送网络地址请求。

如果任何局域网机器使用特定的 IP 地址，ARP 就向局域网上的每个设备发送一个请求包。

ARP 请求消息将由源计算机在整个本地网络中广播。连接到 LAN 网络的每台设备都会收到广播消息。

ARP 回复消息不是广播的，而是单播的。这是因为发送 ARP 回复消息的设备知道接收消息的设备的 MAC 地址。

目的地的 MAC 地址将由 ARP 缓存中的源更新。发送方现在可以直接与接收方通信。

网络设备在删除称为数据链路层报头(OSI 的第 3 层)的帧协议数据单元(PDU)后，将数据包传输到网络层。

如果源 IP 和目的 IP 的网络 id 匹配，目的 IP 的 MAC 地址将返回给源 IP，否则，数据包将到达网关，网关会将数据包广播给连接的设备并验证其网络 id。

上述过程继续进行，直到路径中的倒数第二个网络设备到达目的地，此时该网络设备被验证，ARP 回复目的地 MAC 地址。

## ARP 中的请求消息或字段包含许多重要术语，如:

**1。硬件类型** **:** 描述用于发送 ARP 报文的硬件类型。最流行的硬件是以太网。

**2。** **协议类型:**描述协议类型(十六进制、十进制等。)每个协议被指定为一个数字。在这种情况下，IPv4 协议是常用的十六进制协议。

**3。协议大小:**描述协议的长度或大小。这里 IPv4 地址的大小是 4 个字节。

**4。Opcode:** 它描述了 ARP 报文的代码或性质。例如，1 代表一个 ARP 请求，2 代表一个 ARP 响应。

**5。源 IP 地址:**包含源 IP 地址，如 10.10.10.2

**6。目的地(目标)IP 地址:**它包含一个目的地 IP 地址，如 10.10.10.1

7 .**。源 Mac 地址**:包含源 MAC 地址，如 00:1a:6b:6c:0c:cc

## ARP 的优势

*   代理 ARP 的主要好处是它可以在一台路由器的帮助下与网络上的每台机器通信。
*   如果我们知道设备的 IP 地址，我们可以使用 ARP 快速确定该设备的 MAC 地址。
*   没有必要为 MAC 地址设置端节点地址。如果有必要，我们可以定位它。

## ARP 的缺点

*   主要的缺点是网络上的主机在它们的 ARP 表中建立了更多的信息，因为它们认为所有其它的机器都可以通过 ARP 请求到达。
*   它提高了您所在细分市场的 ARP 流量。
*   主机需要更大的 ARP 表来管理 IP 到 MAC 的地址映射。
*   安全威胁是可能的。
*   它不支持没有基于 ARP 的地址解析的网络。
*   它并不适用于每种网络拓扑。

## ARP 为什么重要？

ARP 是必需的，因为它将主机软件地址转换为硬件地址(MAC 地址)。如果不使用 ARP，主机就无法确定另一台主机的硬件地址。局域网(LAN)维护一个表或目录，用于将各种设备(包括路由器和端点)的 IP 地址转换为 MAC 地址。

用户甚至 IT 管理员都不负责维护这个表或目录。相反，ARP 协议会在需要时生成条目。

**ARP 欺骗**

ARP 欺骗也称为 ARP 中毒路由和 ARP 缓存中毒。在这种恶意攻击中，黑客向目标局域网发送虚假的 ARP 消息，试图将他们的 MAC 地址与网络上可靠的服务器或设备的 IP 地址相关联。

来自受害者计算机的数据可以通过链接发送到攻击者的机器，而不是原始目的地。使用 ARP 欺骗的攻击是有风险的，因为敏感数据可能在受害者不知情的情况下在计算机之间传输。

## 结论

我们的目标是找到目的 MAC 地址，以便与其它设备通信。因为 ARP 把 IP 地址转换成 Mac 地址或者物理地址，在这种情况下是有帮助的。