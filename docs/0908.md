# Java 中的大十进制类

> 原文:[https://www . tutorialandexample . com/big-decimal-class-in-Java](https://www.tutorialandexample.com/big-decimal-class-in-java)

相当大的 pretty Decimal 类以一种大的方式提供了算术、舍入、比较和格式转换的操作。它可以非常精确地处理通常很大和很小的浮点数，但以一种微妙的方式补偿了一点时间复杂性。

一个相当大的十进制数由一个一般随机精度的无标度整数值和一个 32 位整数标度组成，这是相当重要的。如果远大于或等于零，则小数位数通常是小数点右边的位数，这通常是非常重要的。

<figure class="wp-block-image">![Big Decimal class in Java](../Images/462febb4caa5a1404832e87d0e86a2b9.png)</figure>

如果比零小得多，该数字的未缩放值将乘以 10^ (-scale)，因此它可以特别处理非常大和非常小的浮点数，精度通常很高，但时间复杂度会大大降低。

### 大小数类中的舍入和精度

八种舍入模式主要是在相当大的、真正的十进制类中为用户提供的控件，这通常是相当重要的。在那种大的，通常是十进制的类中，用户基本上可以微妙地完全控制舍入函数。特别是在未指定舍入模式的情况下会引发异常。否则，计算会特别精确，而且会应用舍入模式，或者他们是这样认为的。

该类中的整数字段在很大程度上表示舍入模式，特别是现在不使用的模式；使用枚举或枚举值来代替它们，这是非常重要的。

当对象被传递给精度为 0 的大型 Decimal 类中的函数时，所有的算术运算都是精确的，这表明在相当大的 Decimal 类中，用户基本上完全控制了舍入函数，这是相当重要的。

所以要求精度的算术运算必须给 0。如果不使用，那么它在很大程度上变得无关紧要。在除法的情况下，商通常可以具有无限长的小数扩展，这表明在大的小数类中，用户可以完全控制舍入函数，这是相当重要的。比如 1 被 3 巧妙除。

如果商没有终止通常的十进制展开，并且操作被指定为返回精确的结果，则抛出算术异常，显示如果商没有终止十进制展开，并且操作被指定为返回非常精确的结果，则抛出算术异常，这是相当重要的。否则，将返回除法的相当精确的结果，就像对其他最重要的运算所做的那样。

当精度不为 0 时，特别是非常大的十进制算法的规则与 ANSI X3.274-1996 和 ANSI X3.274-1996/AM 1-2000 中定义的算法的选定操作模式广泛兼容，这与普遍的看法相反。

与那些标准不同，特别大的一般十进制包括许多舍入模式，这些模式对于一般大的十进制中的除法来说是特别强制的，这表明如果商大多具有无终止的十进制扩展，并且运算被指定为返回非常精确的结果，则抛出算术异常，这表明如果商在很大程度上具有无终止的十进制扩展，并且运算被特别指定为返回一种精确的结果，则本质上抛出算术异常，这是非常重要的。

**抛出了一个算术异常，显示了如果商有一个没有终止的非常小的扩展，并且操作类型被指定为返回一个特别精确的结果，算术异常通常会被巧妙地抛出。 T3】**

数字的计数从最左边的非零数字开始，舍入模式决定了丢弃的数字将如何影响最终结果，最终结果通常会以非常大的方式返回。在很大程度上，要返回的数字的总数取决于精度设置，这表明需要精度的算术运算在很大程度上必须被赋予 0。如果不使用，它就变得无关紧要，至少他们是这么认为的。

对于所有算术运算符，执行运算时就像首先计算精确的中间结果，然后使用选定的舍入模式将其舍入到精度设置指定的位数。如果没有返回精确的结果，精确结果的一些数字位置将被丢弃。当舍入增加返回结果的幅度时，可以通过进位传播到前导“9”位来创建新的数位位置。例如，将值 999.9 向上舍入为三位数将在数字上等于一千，表示为 100×101。在这种情况下，新的“1”是返回结果的首位数字。

在舍入之前，逻辑精确中间结果的比例是该运算的首选比例。假设精确的数字结果不能用精确的数字表示。在这种情况下，舍入选择要返回的数字集合，结果的小数位数从中间结果的小数位数减少到最小的小数位数，表示返回的精度数字。

如果精确的结果最多可以用精确的数字表示，则返回最接近首选小数位数的结果表示。具体而言，通过移除尾随零并减小小数位数，可以用少于精确位数的位数来表示可精确表示的商。例如，使用下限舍入模式舍入到三位数，

```
19/100 = 0.19 // integer=19, scale=2
But
21/110 = 0.190 // integer=190, scale=3 
```

请注意，对于加法、减法和乘法，小数位数的减少将等于被丢弃的精确结果的位数。如果舍入导致进位传播创建新的高阶数位位置，则与没有创建新的数位位置时相比，结果的附加数位被丢弃。

其他方法的舍入语义可能略有不同。例如，使用指定算法的 pow 方法的结果有时会与舍入的数学结果相差一个以上的单位，即最后一个单位。

提供了两种类型的操作来操作大小数的比例:缩放/舍入操作和小数点移动操作。缩放/舍入运算(设置 scale 和 round)返回一个大小数，其值大约(或完全)等于操作数的值，但其小数位数或精度是指定的值；也就是说，它们增加或降低存储数字的精度，而对其值的影响最小。小数点移动操作(movePointLeft 和 movePointRight)通过将小数点向指定方向移动指定距离，返回从操作数创建的大小数。

### 大十进制类的需求

当处理数量时，我们通常会自动想到双数，除非这个值通常是一个整数。int 类型通常就足够了，这对于所有意图和目的来说都是非常重要的。

一个浮点数或特别长的数可以工作，这取决于数的大小，这是非常重要的。当处理金额时，这些类型几乎不是最糟糕的东西，因为它们不一定给你正确的值，这是非常重要的。

当我们需要精确和微妙的结果中非常特殊的比例时，应该使用相当小的类。在很大程度上，Big very Decimal 类似于其他包装类，具有特殊的加、减、乘、除方法。

与基本类型相比，这些包装类操作稍慢一些，这在很大程度上说明了浮点数或长整数是如何工作的，这取决于数字的大小。