# 传输控制协议（Transmission Control Protocol）

> 原文：<https://www.tutorialandexample.com/tcp>

TCP 是帮助建立连接的传输层协议。TCP 是传输控制协议的意思。它保证两个联网设备之间的安全数据传输。只有建立了安全连接，才能发送数据。

接收方在收到数据后发送一个接收数据的确认。为了在设备之间传输数据，它使用数据块。它有更多的系统功能，包括流量控制、错误控制和拥塞控制，但它传输数据的速度很慢。TCP 报头的长度为 20-60 字节，包含各种信息以提高可靠性。HTTP、FTP 等协议使用 TCP。因为它的可靠性而用于网络上的安全数据传输。

## TCP 的工作原理

为了确保每条消息不受影响地到达目的地，TCP/IP 模型将数据分成小束，然后在另一端重新组合成原始消息。

不要一次发送所有信息，而是将信息分成更小的信息包发送，这样更容易保持效率。当一个消息被分成束时，如果一个路由是狭窄的并且目的地是相同的，那么束可能沿着不同的路由行进。

例如，当用户想在互联网上打开一个网页时，服务器处理该请求并以 HTML 页面的形式发送用户响应。HTTP 协议是服务器使用的协议。为了发送 HTML 文件，HTTP 要求 TCP 层建立必要的连接。

现在，数据被 TCP 分成小数据包，然后发送到 IP 层。数据包通过各种路径传输到目的地。当传输完成且所有数据包都已收到时，用户系统中的 TCP 层会进行确认。

## TCP 的特性

TCP 具有以下特性:

### 流数据传输

应用层的应用程序向下层发送连续的字节流。TCP 负责将这个字节流分成称为 TCP 段的数据包，这些数据包通过 IP 层发送到目的设备。应用程序不需要担心字节流数据包被破坏。

### 可靠的

TCP 最重要的特性是它能够可靠地传送数据。为了确保可靠性，被网络层破坏、放错位置、复制或传送的数据必须由 TCP 恢复。通过 TCP 发送的每个字节都有一个唯一的序列号，接收 TCP 层需要对每个字节做出响应。如果发送方没有收到确认，则重新传输数据。

### TCP 寻址

端口号用于远程主机(TSAPs)之间的 TCP 通信。端口号范围从 0 到 65535，划分如下:

*   设备端口(0–1023)
*   用户端口(1024–49151)
*   动态/专用端口(49152–65535)

### 带宽管理

TCP 采用窗口大小的概念来满足带宽管理的需要。窗口大小告诉远端的发送者在这一端可以接收多少数据字节段。

窗口大小减小到一半，如果错过确认，则重新开始慢启动阶段。

### 错误控制和自由控制

TCP 使用端口号确定数据段的应用程序进程。它还使用序列号与远程主机同步。每个发送和接收的数据段都有一个唯一的序列号。当发送方收到 ACK 时，接收方收到的最后一个数据段会通知发送方。使用最近收到的数据包的序列号，接收方可以确定发送方发送的最后一个数据段。

如果最近收到的数据段的序列号与接收方期望的序列号不匹配，则丢弃该数据段并返回 NACK。

### 连接管理

TCP 使用服务器/客户端模型运行。服务器接受或拒绝客户端发出的连接请求。连接管理是通过三次握手完成的。

### 连接的建立

客户端启动连接并发送包含序列号的数据段。服务器以其序列号和大于客户端序列号的客户端数据段 ACK 进行响应。

在收到其数据段的 ACK 后，客户端发送服务器响应的确认。

### 释放；排放；发布

FIN 标志设置为 1 的 TCP 数据段可以由服务器或客户端发送。当接收端用确认 FIN 响应时，TCP 通信方向被关闭，连接被释放。

### 多样的

多路复用是将两个或多个数据流合并成一个会话的过程。当 TCP 客户端与服务器建立连接时，总是引用定义明确的端口号来标识应用程序进程。客户端从专用端口号池中随机选择一个端口号。

TCP 多路复用允许客户端同时与多个应用程序进程通信。例如，客户请求包含不同类型数据(HTTP、SMTP、FTP 等)的网页。)TCP 会话超时被延长，并且会话保持打开更长时间，以避免三次握手的开销。

因此，客户端系统可以通过单个虚拟连接接收多个连接。如果超时过长，这些虚拟连接对服务器不利。

### 拥塞控制

当大量数据被送入一个无法处理的系统时，就会发生拥塞。TCP 使用窗口机制来管理拥塞。TCP 指定窗口大小，告诉另一端要发送多少数据段。TCP 可以使用三种算法之一来控制拥塞:

*   加法增加，乘法减少
*   缓慢起动
*   超时反应

### 故障修复

TCP 是一种非常可靠的协议。它为数据段中发送的每个字节分配一个序列号。它提供了一种反馈机制，通过这种机制，当数据包到达时，主机会确认它带有等待的下一个序列号(如果它不是最后一个数据段)。

当 TCP 服务器在对话过程中崩溃后重新启动时，会向该服务器上的所有主机发送 TPDU 广播。之后，主机可以发送从未被确认的最终数据段，并继续发送。

**TCP 的优势**

*   这是一个可靠的协议。
*   它包括错误检查机制和恢复机制。
*   它调节流量。
*   它确保数据按照发送的准确顺序到达预期目的地。
*   没有任何组织或个人拥有该开放协议。

**TCP 的缺点**

*   TCP 是为广域网设计的，因此对于资源有限的小型网络来说，它的大小可能是个问题。
*   TCP 在几个层上运行，这会降低网络性能。
*   它无论如何都不是通用的。换句话说，它只能代表 TCP/IP 协议集。

## 结论

TCP 是帮助建立连接的传输层协议。TCP 是传输控制协议的意思。它保证两个联网设备之间的安全数据传输。只有建立了安全连接，才能发送数据。